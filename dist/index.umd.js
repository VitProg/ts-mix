!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self)["ts-mix"]={})}(this,function(e){"use strict";const n="__afterMixins";class t extends Error{}function i(e,...n){return class extends e{constructor(...e){super(...e),o(this,n)}}}function o(e,t){"object"!=typeof e.mixins&&(e.mixins={});for(const n of t){if(!n)continue;const t=n.mixinName;if(e.mixins[t]=n,n.target=e,"setup"in n&&"function"==typeof n.setup){const e=n.setup();if(void 0!==e)for(const[t,i]of Object.entries(e))n[t]=i}const i=s(n);for(const t of Object.keys(i)){const o=i[t];if(!(t in e))if("function"==typeof o.value)Reflect.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!1,value:(...e)=>n[t](...e)});else if(o.get||o.set){const i={enumerable:!1,configurable:!0};o.get&&(i.get=function(){return n[t]}),o.set&&(i.set=function(e){n[t]=e}),Reflect.defineProperty(e,t,i)}else Reflect.defineProperty(e,t,{enumerable:!1,configurable:!0,get:()=>n[t],set(e){n[t]=e}})}}for(const e of t)e.init&&e.init();n in e&&"function"==typeof e[n]&&e[n]()}const r=["__proto__","init","setup","target","mixinName"];function s(e){const n={},t=Object.getOwnPropertyNames(e).filter(e=>!1===r.includes(e));for(const i of t){const t=Object.getOwnPropertyDescriptor(e,i);void 0!==t&&(n[i]=t)}return n}function f(e,n,t){return"object"==typeof e&&"mixins"in e&&"object"==typeof e.mixins&&n.mixinName in e.mixins&&"object"==typeof e.mixins[n.mixinName]}function c(e,n,t){if(!("object"==typeof e&&"mixins"in e&&"object"==typeof e.mixins))return!1;for(const t of n)if(!1===f(e,t))return!1;return!0}e.MixinAssertError=t,e.UseMixins=function(...e){let n;return n=class{constructor(){o(this,e)}}},e.UseMixinsExtends=function(e,...n){let t;return t=i(e,...n)},e.applyMixinsForClass=i,e.applyMixinsForObject=function(e,...n){const t=Object.assign({},e);return o(t,n),t},e.assertHaveMixin=function(e,n,i,o){if(!1===f(e,n))throw o instanceof Error?o:new t(null!=o?o:`The object does not have mixin '${n.mixinName}'`)},e.assertHaveMixins=function(e,n,i,o){if(!1===c(e,n))throw o instanceof Error?o:new t(null!=o?o:`The object does not have one or more of mixins ${n.map(e=>`'${e.mixinName}'`).join(", ")}`)},e.haveMixin=f,e.haveMixins=c,e.isMixin=function(e){var n,t,i,o,r,s,f;return"object"==typeof e&&"string"==typeof(null===(n=e)||void 0===n?void 0:n.mixinName)&&"object"==typeof(null===(t=e)||void 0===t?void 0:t.target)&&"object"==typeof(null===(o=null===(i=e)||void 0===i?void 0:i.target)||void 0===o?void 0:o.mixins)&&(null===(r=e)||void 0===r?void 0:r.mixinName)in(null===(f=null===(s=e)||void 0===s?void 0:s.target)||void 0===f?void 0:f.mixins)},e.mixin=function(e){const n=e;return Object.assign({target:void 0},n)},e.mixinsProp=function(...e){return(n,t)=>{o(n,e)}},e.use=function(...e){return function(n){return i(n,...e)}},Object.defineProperty(e,"__esModule",{value:!0})});
