!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((e=e||self)["ts-mix"]={})}(this,function(e){"use strict";const i="__afterMixins";class n extends Error{}function t(e,i,n){return"object"==typeof e&&"mixins"in e&&"object"==typeof e.mixins&&i.mixinName in e.mixins&&"object"==typeof e.mixins[i.mixinName]}function o(e,i,n){if(!("object"==typeof e&&"mixins"in e&&"object"==typeof e.mixins))return!1;for(const n of i)if(!1===t(e,n))return!1;return!0}function r(e,i,n){for(const t of Object.keys(e)){const o=e[t];if(!(t in i))if("function"==typeof o.value)Reflect.defineProperty(i,t,{enumerable:!1,configurable:!0,writable:!1,value:(...e)=>n[t](...e)});else if(o.get||o.set){const e={enumerable:!1,configurable:!0};o.get&&(e.get=function(){return n[t]}),o.set&&(e.set=function(e){n[t]=e}),Reflect.defineProperty(i,t,e)}else Reflect.defineProperty(i,t,{enumerable:!1,configurable:!0,get:()=>n[t],set(e){n[t]=e}})}}function s(e,n,...t){"object"!=typeof e.mixins&&(e.mixins={}),t=t.filter(e=>!!e);for(const i of t){const n=Object.assign({},i),t=n.mixinName;e.mixins[t]=n,n.target=e}for(const i of Object.values(e.mixins)){if("setup"in i&&"function"==typeof i.setup){const e=i.setup();if(void 0!==e)for(const[n,t]of Object.entries(e))i[n]=t}if(n){r(c(i),e,i)}}for(const i of Object.values(e.mixins))i.init&&i.init();i in e&&"function"==typeof e[i]&&e[i]()}const f=["__proto__","init","setup","target","mixinName"];function c(e){const i={},n=Object.getOwnPropertyNames(e).filter(e=>!1===f.includes(e));for(const t of n){const n=Object.getOwnPropertyDescriptor(e,t);void 0!==n&&(i[t]=n)}return i}e.MixinAssertError=n,e.applyMixins=function(e,...i){return s(e,!1,...i)},e.assertHaveMixin=function(e,i,o,r){if(!1===t(e,i))throw r instanceof Error?r:new n(null!=r?r:`The object does not have mixin '${i.mixinName}'`)},e.assertHaveMixins=function(e,i,t,r){if(!1===o(e,i))throw r instanceof Error?r:new n(null!=r?r:`The object does not have one or more of mixins ${i.map(e=>`'${e.mixinName}'`).join(", ")}`)},e.haveMixin=t,e.haveMixins=o,e.isMixin=function(e){var i,n,t,o,r,s,f;return"object"==typeof e&&"string"==typeof(null===(i=e)||void 0===i?void 0:i.mixinName)&&"object"==typeof(null===(n=e)||void 0===n?void 0:n.target)&&"object"==typeof(null===(o=null===(t=e)||void 0===t?void 0:t.target)||void 0===o?void 0:o.mixins)&&(null===(r=e)||void 0===r?void 0:r.mixinName)in(null===(f=null===(s=e)||void 0===s?void 0:s.target)||void 0===f?void 0:f.mixins)},e.mixin=function(e){const i=e;return Object.assign({target:void 0},i)},e.useMixins=function(e,i,n,t,o,r,f,c,u,a,l){var m;return(m=class extends e{constructor(...e){super(...e),s(this,!0,i,n,t,o,r,f,c,u,a,l)}}).__m_b_type=e,m},e.useMixinsForObject=function(e,i,n,t,o,r,f,c,u,a,l){return s(e,!0,i,n,t,o,r,f,c,u,a,l),e},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgudW1kLmpzIiwic291cmNlcyI6WyIuLi9zcmMvdHlwZXMudHMiLCIuLi9zcmMvdHlwZS1ndWFyZHMudHMiLCIuLi9zcmMvbWl4aW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoIGludGVyZmFjZS1vdmVyLXR5cGUtbGl0ZXJhbCAqL1xuaW1wb3J0IHtMLCBOfSBmcm9tICd0cy10b29sYmVsdCc7XG5cbmV4cG9ydCB0eXBlIEFueU9iamVjdCA9IFJlY29yZDxzdHJpbmcsIGFueT47XG5leHBvcnQgdHlwZSBBcnJheVZhbHVlczxvYmogZXh0ZW5kcyBhbnlbXSB8IFJlYWRvbmx5QXJyYXk8YW55Pj4gPVxuICAgIG9ialtudW1iZXJdO1xuZXhwb3J0IHR5cGUgVW5pb25Ub0ludGVyc2VjdGlvbjxVbmlvbj4gPVxuICAgIChVbmlvbiBleHRlbmRzIGFueSA/ICh4OiBVbmlvbikgPT4gdm9pZCA6IG5ldmVyKSBleHRlbmRzICgoeDogaW5mZXIgaW50ZXJzZWN0aW9uKSA9PiB2b2lkKVxuICAgICAgICA/IGludGVyc2VjdGlvblxuICAgICAgICA6IG5ldmVyO1xuXG5leHBvcnQgaW50ZXJmYWNlIElNaXhpbkJhc2U8TmFtZSBleHRlbmRzIHN0cmluZz4ge1xuICAgIG1peGluTmFtZTogTmFtZTtcbiAgICBpbml0PygpOiB2b2lkO1xuICAgIHNldHVwPygpOiBBbnlPYmplY3Q7IC8vIHRvZG9cbiAgICB0YXJnZXQ6IE1peGluVGFyZ2V0PElNaXhpbkJhc2U8TmFtZT4+O1xufVxuXG5cbmV4cG9ydCB0eXBlIE1peGluPE5hbWUgZXh0ZW5kcyBzdHJpbmcsIENvbmZpZyBleHRlbmRzIEFueU9iamVjdD4gPSBDb25maWcgJiBJTWl4aW5CYXNlPE5hbWU+O1xuZXhwb3J0IHR5cGUgTWl4aW5GdWxsPE5hbWUgZXh0ZW5kcyBzdHJpbmcsIENvbmZpZyBleHRlbmRzIEFueU9iamVjdD4gPSBPbWl0PElNaXhpbkJhc2U8TmFtZT4sICd0YXJnZXQnPiAmIENvbmZpZyAmIHt0YXJnZXQ6IEFueU9iamVjdCAmIElVc2VNaXhpbnM8QW55T2JqZWN0LCBNaXhpbjxOYW1lLCBDb25maWc+Pn07XG5leHBvcnQgdHlwZSBNaXhpblRoaXM8Q29uZmlnIGV4dGVuZHMgQW55T2JqZWN0PiA9IE1peGluRnVsbDxhbnksIENvbmZpZz47XG5cbnR5cGUgTWFrZU1peGluSXRlbTxYPiA9XG4gICAgWCBleHRlbmRzIElNaXhpbkJhc2U8aW5mZXIgTmFtZT5cbiAgICAgICAgPyBSZWNvcmQ8TmFtZSwgWD5cbiAgICAgICAgOiBuZXZlcjtcblxuZXhwb3J0IHR5cGUgTWl4aW5zUHJvcDxNaXhpbnMgZXh0ZW5kcyBSZWFkb25seUFycmF5PE1peGluPGFueSwgYW55Pj4+ID1cbiAgICBVbmlvblRvSW50ZXJzZWN0aW9uPEFycmF5VmFsdWVzPHsgW2kgaW4ga2V5b2YgTWl4aW5zXTogTWFrZU1peGluSXRlbTxNaXhpbnNbaV0+IH0+PjtcblxuXG5leHBvcnQgdHlwZSBBbnlNaXhpbiA9IE1peGluPGFueSwgYW55PjtcbmV4cG9ydCB0eXBlIEFueU1peGluUmVjb3JkID0gUmVjb3JkPHN0cmluZywgQW55TWl4aW4+O1xuXG50eXBlIEV4dHJhY3RDbGFzc0ZpZWxkczxDbGFzcz4gPSAga2V5b2YgKFxuICAgIENsYXNzIGV4dGVuZHMge19fbV9iX3R5cGU6IENvbnN0cnVjdG9yPGluZmVyIEo+fSA/IEogOiAoXG4gICAgICAgIENsYXNzIGV4dGVuZHMgQ29uc3RydWN0b3I8YW55PiA/IEluc3RhbmNlVHlwZTxDbGFzcz4gOlxuICAgICAgICAgICAgQ2xhc3NcbiAgICAgICAgKSk7XG5cbmV4cG9ydCB0eXBlIElVc2VNaXhpbnM8XG4gICAgQ2xhc3MgZXh0ZW5kcyBBbnlPYmplY3QsXG4gICAgTTEgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4sXG4gICAgTTIgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNMyBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuICAgIE00IGV4dGVuZHMgTWl4aW48YW55LCBhbnk+ID0gbmV2ZXIsXG4gICAgTTUgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNNiBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuICAgIE03IGV4dGVuZHMgTWl4aW48YW55LCBhbnk+ID0gbmV2ZXIsXG4gICAgTTggZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNOSBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuICAgIE0xMCBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuPiA9IChDbGFzcyBleHRlbmRzIENvbnN0cnVjdG9yPGluZmVyIEo+ID8gSiA6IENsYXNzKSAmXG4gICAgT21pdDxCdWlsZE1peGluc0ludGVyc2VjdGlvbjxNMSwgTTIsIE0zLCBNNCwgTTUsIE02LCBNNywgTTcsIE05LCBNMTA+LCBFeHRyYWN0Q2xhc3NGaWVsZHM8Q2xhc3M+PiAmXG4gICAgTWl4aW5zUHJvcE9iamVjdDxNMSwgTTIsIE0zLCBNNCwgTTUsIE02LCBNNywgTTgsIE05LCBNMTA+O1xuXG5leHBvcnQgdHlwZSBNaXhpbnNQcm9wT2JqZWN0PFxuICAgIE0xIGV4dGVuZHMgTWl4aW48YW55LCBhbnk+LFxuICAgIE0yIGV4dGVuZHMgTWl4aW48YW55LCBhbnk+ID0gbmV2ZXIsXG4gICAgTTMgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNNCBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuICAgIE01IGV4dGVuZHMgTWl4aW48YW55LCBhbnk+ID0gbmV2ZXIsXG4gICAgTTYgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNNyBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuICAgIE04IGV4dGVuZHMgTWl4aW48YW55LCBhbnk+ID0gbmV2ZXIsXG4gICAgTTkgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNMTAgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbj4gPSB7bWl4aW5zOiBNaXhpbnNQcm9wPFtNMSwgTTIsIE0zLCBNNCwgTTUsIE02LCBNNywgTTgsIE05LCBNMTBdPiAmIEFueU1peGluUmVjb3JkfTtcblxuXG5leHBvcnQgdHlwZSBFeHRyYWN0TWl4aW5zUHJvcDxUPiA9IFQgZXh0ZW5kcyB7bWl4aW5zOiBhbnl9ID8gVFsnbWl4aW5zJ10gOiB7fTtcblxuZXhwb3J0IHR5cGUgQnVpbGRNaXhpbnNJbnRlcnNlY3Rpb248XG4gICAgTTEgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4sXG4gICAgTTIgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNMyBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuICAgIE00IGV4dGVuZHMgTWl4aW48YW55LCBhbnk+ID0gbmV2ZXIsXG4gICAgTTUgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNNiBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuICAgIE03IGV4dGVuZHMgTWl4aW48YW55LCBhbnk+ID0gbmV2ZXIsXG4gICAgTTggZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNOSBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuICAgIE0xMCBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuPiA9XG4gICAgTTEgJlxuICAgIENoZWNrTmV2ZXI8TTIsXG4gICAgICAgIENoZWNrTmV2ZXI8TTMsXG4gICAgICAgICAgICBDaGVja05ldmVyPE00LFxuICAgICAgICAgICAgICAgIENoZWNrTmV2ZXI8TTUsXG4gICAgICAgICAgICAgICAgICAgIENoZWNrTmV2ZXI8TTYsXG4gICAgICAgICAgICAgICAgICAgICAgICBDaGVja05ldmVyPE03LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrTmV2ZXI8TTgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrTmV2ZXI8TTksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja05ldmVyPE0xMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbWl0PE0xMCwga2V5b2YgTTEwIHwga2V5b2YgTTggfCBrZXlvZiBNNyB8IGtleW9mIE02IHwga2V5b2YgTTUgfCBrZXlvZiBNNCB8IGtleW9mIE0zIHwga2V5b2YgTTIgfCBrZXlvZiBNMSB8ICdtaXhpbk5hbWUnIHwgJ3RhcmdldCcgfCAnaW5pdCcgfCAnc2V0dXAnIHwgJ19fdXNlZF9taXhpbnMnPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbWl0PE05LCBrZXlvZiBNOCB8IGtleW9mIE03IHwga2V5b2YgTTYgfCBrZXlvZiBNNSB8IGtleW9mIE00IHwga2V5b2YgTTMgfCBrZXlvZiBNMiB8IGtleW9mIE0xIHwgJ21peGluTmFtZScgfCAndGFyZ2V0JyB8ICdpbml0JyB8ICdzZXR1cCcgfCAnX191c2VkX21peGlucyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT21pdDxNOCwga2V5b2YgTTcgfCBrZXlvZiBNNiB8IGtleW9mIE01IHwga2V5b2YgTTQgfCBrZXlvZiBNMyB8IGtleW9mIE0yIHwga2V5b2YgTTEgfCAnbWl4aW5OYW1lJyB8ICd0YXJnZXQnIHwgJ2luaXQnIHwgJ3NldHVwJyB8ICdfX3VzZWRfbWl4aW5zJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT21pdDxNNywga2V5b2YgTTYgfCBrZXlvZiBNNSB8IGtleW9mIE00IHwga2V5b2YgTTMgfCBrZXlvZiBNMiB8IGtleW9mIE0xIHwgJ21peGluTmFtZScgfCAndGFyZ2V0JyB8ICdpbml0JyB8ICdzZXR1cCcgfCAnX191c2VkX21peGlucyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbWl0PE02LCBrZXlvZiBNNSB8IGtleW9mIE00IHwga2V5b2YgTTMgfCBrZXlvZiBNMiB8IGtleW9mIE0xIHwgJ21peGluTmFtZScgfCAndGFyZ2V0JyB8ICdpbml0JyB8ICdzZXR1cCcgfCAnX191c2VkX21peGlucyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA+LFxuICAgICAgICAgICAgICAgICAgICAgICAgT21pdDxNNSwga2V5b2YgTTQgfCBrZXlvZiBNMyB8IGtleW9mIE0yIHwga2V5b2YgTTEgfCAnbWl4aW5OYW1lJyB8ICd0YXJnZXQnIHwgJ2luaXQnIHwgJ3NldHVwJyB8ICdfX3VzZWRfbWl4aW5zJz5cbiAgICAgICAgICAgICAgICAgICAgPixcbiAgICAgICAgICAgICAgICAgICAgT21pdDxNNCwga2V5b2YgTTMgfCBrZXlvZiBNMiB8IGtleW9mIE0xIHwgJ21peGluTmFtZScgfCAndGFyZ2V0JyB8ICdpbml0JyB8ICdzZXR1cCcgfCAnX191c2VkX21peGlucyc+XG4gICAgICAgICAgICAgICAgPixcbiAgICAgICAgICAgICAgICBPbWl0PE0zLCBrZXlvZiBNMiB8IGtleW9mIE0xIHwgJ21peGluTmFtZScgfCAndGFyZ2V0JyB8ICdpbml0JyB8ICdzZXR1cCcgfCAnX191c2VkX21peGlucyc+XG4gICAgICAgICAgICA+LFxuICAgICAgICAgICAgT21pdDxNMiwga2V5b2YgTTEgfCAnbWl4aW5OYW1lJyB8ICd0YXJnZXQnIHwgJ2luaXQnIHwgJ3NldHVwJyB8ICdfX3VzZWRfbWl4aW5zJz5cbiAgICAgICAgPixcbiAgICAgICAge31cbiAgICAgICAgPjtcblxuXG5cbmV4cG9ydCB0eXBlIENoZWNrTmV2ZXI8VCwgSWZOb3ROZXZlciwgSWZOZXZlciA9IG5ldmVyPiA9IFtUXSBleHRlbmRzIFtuZXZlcl0gPyBJZk5ldmVyIDogSWZOb3ROZXZlcjtcblxuXG5leHBvcnQgdHlwZSBNaXhpblRhcmdldDxNIGV4dGVuZHMgTWl4aW48YW55LCBhbnk+PiA9IEFueU9iamVjdCAmIElVc2VNaXhpbnM8QW55T2JqZWN0LCBNPjtcblxuXG5leHBvcnQgY29uc3QgbWl4aW5zQWZ0ZXJJbml0ID0gJ19fYWZ0ZXJNaXhpbnMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElNaXhpbkFmdGVySW5pdEhhbmRsZXIge1xuICAgIF9fYWZ0ZXJNaXhpbnM6ICgpID0+IHZvaWQ7XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vL1xuXG5cblxuZXhwb3J0IGNsYXNzIE1peGluQXNzZXJ0RXJyb3IgZXh0ZW5kcyBFcnJvciB7fVxuXG5cbmV4cG9ydCB0eXBlIENvbmZpZ0NvbXBsZXg8TmFtZSBleHRlbmRzIHN0cmluZywgQ29uZmlnIGV4dGVuZHMgQW55T2JqZWN0LCBQYXJ0aWFsS2V5cyBleHRlbmRzIEFycmF5PGtleW9mIENvbmZpZz4gPSBbXT5cbiAgICA9IFBhcnRpYWxCeTxDb25maWcsIE9SPFBhcnRpYWxLZXlzPj4gJlxuICAgIHsgbWl4aW5OYW1lOiBOYW1lLCBpbml0PzogKCkgPT4gdm9pZCB9ICZcbiAgICAoT1I8UGFydGlhbEtleXM+IGV4dGVuZHMgbmV2ZXIgPyB7fSA6IHsgc2V0dXA6ICgpID0+IFJlcXVpcmVkPFBpY2s8Q29uZmlnLCBPUjxQYXJ0aWFsS2V5cz4+PiB9KTtcbnR5cGUgUGFydGlhbEJ5PFQsIEsgZXh0ZW5kcyBrZXlvZiBUPiA9IE9taXQ8VCwgSz4gJiBQYXJ0aWFsPFBpY2s8VCwgSz4+O1xudHlwZSBPUjxUIGV4dGVuZHMgUmVhZG9ubHlBcnJheTxhbnk+PiA9IFRbbnVtYmVyXTtcblxuXG5leHBvcnQgdHlwZSBDb25zdHJ1Y3RvcjxULCBBIGV4dGVuZHMgYW55W10gPSBhbnlbXT4gPSBuZXcgKC4uLmFyZ3M6IEEpID0+IFQ7XG5cbmV4cG9ydCB0eXBlIEV4dHJhY3RTdGF0aWM8VCBleHRlbmRzIEFueU9iamVjdD4gPSBDaGVja05ldmVyPEV4Y2x1ZGU8a2V5b2YgVCwgJ3Byb3RvdHlwZSc+LCBPbWl0PHtba2V5IGluIGtleW9mIFRdOiBUW2tleV19LCAncHJvdG90eXBlJz4+O1xuXG5leHBvcnQgdHlwZSBDb25zdHJ1Y3RvcldpdGhTdGF0aWM8VCwgQ3RvciBleHRlbmRzIENvbnN0cnVjdG9yPGFueT4+ID1cbiAgICBDaGVja05ldmVyPFxuICAgICAgICBFeGNsdWRlPGtleW9mIEN0b3IsICdwcm90b3R5cGUnPixcbiAgICAgICAgQ29uc3RydWN0b3I8VCwgQ29uc3RydWN0b3JQYXJhbWV0ZXJzPEN0b3I+PiAmIEV4dHJhY3RTdGF0aWM8Q3Rvcj4sXG4gICAgICAgIENvbnN0cnVjdG9yPFQsIENvbnN0cnVjdG9yUGFyYW1ldGVyczxDdG9yPj5cbiAgICA+O1xuIiwiaW1wb3J0IHtBbnlPYmplY3QsIENoZWNrTmV2ZXIsIENvbnN0cnVjdG9yLCBJTWl4aW5CYXNlLCBJVXNlTWl4aW5zLCBNaXhpbiwgTWl4aW5Bc3NlcnRFcnJvciwgTWl4aW5zUHJvcE9iamVjdH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuLy8gbm9pbnNwZWN0aW9uIEpTVW51c2VkTG9jYWxTeW1ib2xzXG5leHBvcnQgZnVuY3Rpb24gaGF2ZU1peGluPE0gZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4sIENsYXNzIGV4dGVuZHMgQW55T2JqZWN0IHwgYW55ID0gbmV2ZXI+KFxuICAgIHY6IEFueU9iamVjdCxcbiAgICBtaXhpbjogTSxcbiAgICB2Q2xhc3M/OiBDbGFzc1xuKTogdiBpcyAoXG4gICAgQ2hlY2tOZXZlcjxDbGFzcyxcbiAgICAgICAgSVVzZU1peGluczxDbGFzcywgTT4sXG4gICAgICAgIE1peGluc1Byb3BPYmplY3Q8TT5cbj4pIHtcbiAgICByZXR1cm4gdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgJ21peGlucycgaW4gdiAmJiB0eXBlb2Ygdi5taXhpbnMgPT09ICdvYmplY3QnICYmXG4gICAgICAgIG1peGluLm1peGluTmFtZSBpbiB2Lm1peGlucyAmJiB0eXBlb2Ygdi5taXhpbnNbbWl4aW4ubWl4aW5OYW1lXSA9PT0gJ29iamVjdCc7XG59XG5cbi8vIG5vaW5zcGVjdGlvbiBKU1VudXNlZExvY2FsU3ltYm9sc1xuZXhwb3J0IGZ1bmN0aW9uIGhhdmVNaXhpbnM8TWl4aW5zIGV4dGVuZHMgQXJyYXk8TWl4aW48YW55LCBhbnk+PiwgQ2xhc3MgZXh0ZW5kcyBBbnlPYmplY3QgfCBhbnkgPSBuZXZlcj4oXG4gICAgdjogQW55T2JqZWN0LFxuICAgIG1peGluczogTWl4aW5zLFxuICAgIHZDbGFzcz86IENsYXNzLFxuKTogdiBpcyAoXG4gICAgQ2hlY2tOZXZlcjxDbGFzcyxcbiAgICAgICAgSVVzZU1peGluczxDbGFzcywgTWl4aW5zWzBdLCBNaXhpbnNbMV0sIE1peGluc1syXSwgTWl4aW5zWzNdLCBNaXhpbnNbNF0+LFxuICAgICAgICBNaXhpbnNQcm9wT2JqZWN0PE1peGluc1swXSwgTWl4aW5zWzFdLCBNaXhpbnNbMl0sIE1peGluc1szXSwgTWl4aW5zWzRdPlxuPikge1xuICAgIGNvbnN0IGJhc2VDaGVjayA9IHR5cGVvZiB2ID09PSBcIm9iamVjdFwiICYmICdtaXhpbnMnIGluIHYgJiYgdHlwZW9mIHYubWl4aW5zID09PSAnb2JqZWN0JztcblxuICAgIGlmICghYmFzZUNoZWNrKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IG1peGluIG9mIG1peGlucykge1xuICAgICAgICBpZiAoaGF2ZU1peGluKHYsIG1peGluLCB2Q2xhc3MpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTWl4aW48TSBleHRlbmRzIElNaXhpbkJhc2U8YW55PiA9IElNaXhpbkJhc2U8YW55Pj4odmFsdWU6IGFueSk6IHZhbHVlIGlzIE0ge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHR5cGVvZiB2YWx1ZT8ubWl4aW5OYW1lID09PSAnc3RyaW5nJyAmJlxuICAgICAgICB0eXBlb2YgdmFsdWU/LnRhcmdldCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdHlwZW9mIHZhbHVlPy50YXJnZXQ/Lm1peGlucyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdmFsdWU/Lm1peGluTmFtZSBpbiB2YWx1ZT8udGFyZ2V0Py5taXhpbnM7XG59XG5cbi8vLyBhc3NlcnRzIGZ1bmN0aW9uc1xuXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0SGF2ZU1peGluPE0gZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4sIENsYXNzIGV4dGVuZHMgQW55T2JqZWN0IHwgYW55ID0gbmV2ZXI+KFxuICAgIHY6IEFueU9iamVjdCxcbiAgICBtaXhpbjogTSxcbiAgICB2Q2xhc3M/OiBDbGFzcyxcbiAgICBlcnJvcj86IHN0cmluZyB8IEVycm9yLFxuKTogYXNzZXJ0cyB2IGlzIChcbiAgICBDaGVja05ldmVyPENsYXNzLFxuICAgICAgICBJVXNlTWl4aW5zPENsYXNzLCBNPixcbiAgICAgICAgTWl4aW5zUHJvcE9iamVjdDxNPlxuPikge1xuICAgIGlmIChoYXZlTWl4aW4odiwgbWl4aW4sIHZDbGFzcykgPT09IGZhbHNlKSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXhpbkFzc2VydEVycm9yKGVycm9yID8/IGBUaGUgb2JqZWN0IGRvZXMgbm90IGhhdmUgbWl4aW4gJyR7bWl4aW4ubWl4aW5OYW1lfSdgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRIYXZlTWl4aW5zPE1NIGV4dGVuZHMgQXJyYXk8TWl4aW48YW55LCBhbnk+PiwgQ2xhc3MgZXh0ZW5kcyBBbnlPYmplY3QgfCBhbnkgPSBuZXZlcj4oXG4gICAgdjogQW55T2JqZWN0LFxuICAgIG1peGluczogTU0sXG4gICAgdkNsYXNzPzogQ2xhc3MsXG4gICAgZXJyb3I/OiBzdHJpbmcgfCBFcnJvcixcbik6IGFzc2VydHMgdiBpcyAoXG4gICAgQ2hlY2tOZXZlcjxDbGFzcyxcbiAgICAgICAgSVVzZU1peGluczxDbGFzcywgTU1bMF0sIE1NWzFdLCBNTVsyXSwgTU1bM10sIE1NWzRdLCBNTVs1XSwgTU1bNl0sIE1NWzddLCBNTVs4XSwgTU1bOV0+LFxuICAgICAgICBNaXhpbnNQcm9wT2JqZWN0PE1NWzBdLCBNTVsxXSwgTU1bMl0sIE1NWzNdLCBNTVs0XSwgTU1bNV0sIE1NWzZdLCBNTVs3XSwgTU1bOF0sIE1NWzldPlxuPikge1xuICAgIGlmIChoYXZlTWl4aW5zKHYsIG1peGlucywgdkNsYXNzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1peGluQXNzZXJ0RXJyb3IoXG4gICAgICAgICAgICAgICAgZXJyb3IgPz8gYFRoZSBvYmplY3QgZG9lcyBub3QgaGF2ZSBvbmUgb3IgbW9yZSBvZiBtaXhpbnMgJHttaXhpbnMubWFwKG0gPT4gYCcke20ubWl4aW5OYW1lfSdgKS5qb2luKCcsICcpfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEFueU9iamVjdCxcbiAgICBCdWlsZE1peGluc0ludGVyc2VjdGlvbixcbiAgICBDb25maWdDb21wbGV4LFxuICAgIENvbnN0cnVjdG9yLFxuICAgIENvbnN0cnVjdG9yV2l0aFN0YXRpYyxcbiAgICBFeHRyYWN0TWl4aW5zUHJvcCxcbiAgICBNaXhpbixcbiAgICBNaXhpbkZ1bGwsXG4gICAgbWl4aW5zQWZ0ZXJJbml0LFxuICAgIE1peGluc1Byb3Bcbn0gZnJvbSBcIi4vdHlwZXNcIjtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZXhwb3J0IGZ1bmN0aW9uIG1peGluPE5hbWUgZXh0ZW5kcyBzdHJpbmcsIENvbmZpZyBleHRlbmRzIEFueU9iamVjdCwgUGFydGlhbEtleXMgZXh0ZW5kcyBBcnJheTxrZXlvZiBDb25maWc+ID0gW10+KFxuICAgIGNvbmZpZzogKENvbmZpZyB8IENvbmZpZ0NvbXBsZXg8TmFtZSwgQ29uZmlnLCBQYXJ0aWFsS2V5cz4pICYgVGhpc1R5cGU8TWl4aW5GdWxsPE5hbWUsIENvbmZpZz4+XG4pOiBNaXhpbkZ1bGw8TmFtZSwgQ29uZmlnPiB7XG4gICAgY29uc3QgY2ZnOiBDb25maWdDb21wbGV4PE5hbWUsIENvbmZpZz4gPSBjb25maWcgYXMgYW55O1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhcmdldDogdW5kZWZpbmVkIGFzIGFueSxcbiAgICAgICAgLi4uY2ZnLFxuICAgIH07XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VNaXhpbnNGb3JPYmplY3Q8VCBleHRlbmRzIEFueU9iamVjdCxcbiAgICBNaXhpbnMgZXh0ZW5kcyBBcnJheTxNaXhpbjxhbnksIGFueT4+LFxuICAgIE0xIGV4dGVuZHMgTWl4aW48YW55LCBhbnk+LFxuICAgIE0yIGV4dGVuZHMgTWl4aW48YW55LCBhbnk+ID0gbmV2ZXIsXG4gICAgTTMgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNNCBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuICAgIE01IGV4dGVuZHMgTWl4aW48YW55LCBhbnk+ID0gbmV2ZXIsXG4gICAgTTYgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNNyBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuICAgIE04IGV4dGVuZHMgTWl4aW48YW55LCBhbnk+ID0gbmV2ZXIsXG4gICAgTTkgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNMTAgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICA+KFxuICAgIHRhcmdldDogVCxcbiAgICBtMTogTTEsIG0yPzogTTIsIG0zPzogTTMsIG00PzogTTQsIG01PzogTTUsIG02PzogTTYsIG03PzogTTcsIG04PzogTTgsIG05PzogTTksIG0xMD86IE0xMCxcbik6IE9taXQ8VCwgJ21peGlucyc+ICZcbiAgICBPbWl0PEJ1aWxkTWl4aW5zSW50ZXJzZWN0aW9uPE0xLCBNMiwgTTMsIE00LCBNNSwgTTYsIE03LCBNOCwgTTksIE0xMD4sIGtleW9mIFQ+ICZcbiAgICB7IG1peGluczogRXh0cmFjdE1peGluc1Byb3A8VD4gJiBNaXhpbnNQcm9wPFtNMSwgTTIsIE0zLCBNNCwgTTUsIE02LCBNNywgTTgsIE05LCBNMTBdPiB9IHtcbiAgICBhcHBseU1peGluc0ludGVybmFsKFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHRydWUsXG4gICAgICAgIG0xLCBtMiwgbTMsIG00LCBtNSwgbTYsIG03LCBtOCwgbTksIG0xMCxcbiAgICApO1xuICAgIHJldHVybiB0YXJnZXQgYXMgYW55O1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlTWl4aW5zPEN0b3IgZXh0ZW5kcyBDb25zdHJ1Y3Rvcjxhbnk+LFxuICAgIEluc3RhbmNlIGV4dGVuZHMgSW5zdGFuY2VUeXBlPEN0b3I+LFxuICAgIEN0b3JBcmd1bWVudHMgZXh0ZW5kcyBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8Q3Rvcj4sXG4gICAgTmV3SW5zdGFuY2UgZXh0ZW5kcyBPbWl0PEluc3RhbmNlLCAnbWl4aW5zJyB8ICdfX21fYl90eXBlJz4gJlxuICAgICAgICBPbWl0PEJ1aWxkTWl4aW5zSW50ZXJzZWN0aW9uPE0xLCBNMiwgTTMsIE00LCBNNSwgTTYsIE03LCBNOCwgTTksIE0xMD4sIGtleW9mIEluc3RhbmNlPiAmXG4gICAgICAgIHsgbWl4aW5zOiBFeHRyYWN0TWl4aW5zUHJvcDxJbnN0YW5jZT4gJiBNaXhpbnNQcm9wPFtNMSwgTTIsIE0zLCBNNCwgTTUsIE02LCBNNywgTTgsIE05LCBNMTBdPiB9LFxuICAgIE0xIGV4dGVuZHMgTWl4aW48YW55LCBhbnk+LFxuICAgIE0yIGV4dGVuZHMgTWl4aW48YW55LCBhbnk+ID0gbmV2ZXIsXG4gICAgTTMgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNNCBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuICAgIE01IGV4dGVuZHMgTWl4aW48YW55LCBhbnk+ID0gbmV2ZXIsXG4gICAgTTYgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNNyBleHRlbmRzIE1peGluPGFueSwgYW55PiA9IG5ldmVyLFxuICAgIE04IGV4dGVuZHMgTWl4aW48YW55LCBhbnk+ID0gbmV2ZXIsXG4gICAgTTkgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICBNMTAgZXh0ZW5kcyBNaXhpbjxhbnksIGFueT4gPSBuZXZlcixcbiAgICA+KFxuICAgIGtsYXNzOiBDdG9yLFxuICAgIG0xOiBNMSwgbTI/OiBNMiwgbTM/OiBNMywgbTQ/OiBNNCwgbTU/OiBNNSwgbTY/OiBNNiwgbTc/OiBNNywgbTg/OiBNOCwgbTk/OiBNOSwgbTEwPzogTTEwLFxuKTogQ29uc3RydWN0b3JXaXRoU3RhdGljPE5ld0luc3RhbmNlLCBDdG9yPiAmIHsgX19tX2JfdHlwZTogQ3RvciB9IHtcbiAgICByZXR1cm4gY2xhc3MgZXh0ZW5kcyBrbGFzcyB7XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp2YXJpYWJsZS1uYW1lXG4gICAgICAgIHN0YXRpYyBfX21fYl90eXBlID0ga2xhc3M7XG5cbiAgICAgICAgY29uc3RydWN0b3IoLi4uYXJnczogYW55W10pIHtcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3MpO1xuICAgICAgICAgICAgYXBwbHlNaXhpbnNJbnRlcm5hbChcbiAgICAgICAgICAgICAgICB0aGlzIGFzIGFueSxcbiAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgIG0xLCBtMiwgbTMsIG00LCBtNSwgbTYsIG03LCBtOCwgbTksIG0xMCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGFzIGFueTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5TWl4aW5zPFQgZXh0ZW5kcyBBbnlPYmplY3QsIE1peGlucyBleHRlbmRzIEFycmF5PE1peGluPGFueSwgYW55Pj4+KFxuICAgIHRhcmdldDogVCwgLi4ubWl4aW5zOiBNaXhpbnNcbik6IHZvaWQge1xuICAgIHJldHVybiBhcHBseU1peGluc0ludGVybmFsKHRhcmdldCwgZmFsc2UsIC4uLm1peGlucyk7XG59XG5cbmZ1bmN0aW9uIG1peGluZ1Byb3BzPFQgZXh0ZW5kcyBBbnlPYmplY3QsIEVYIGV4dGVuZHMgdHJ1ZSB8IGZhbHNlPihcbiAgICBwcm9wZXJ0eURlc2NyaXB0b3JzOiBQcm9wZXJ0eURlc2NyaXB0b3JNYXAsIHRhcmdldDogVCwgbWl4aW46IE1peGluPGFueSwgYW55PlxuKSB7XG4gICAgZm9yIChjb25zdCBwcm9wTmFtZSBvZiBPYmplY3Qua2V5cyhwcm9wZXJ0eURlc2NyaXB0b3JzKSkge1xuICAgICAgICBjb25zdCBwcm9wRGVzY3JpcHRpb24gPSBwcm9wZXJ0eURlc2NyaXB0b3JzW3Byb3BOYW1lXTtcblxuICAgICAgICBpZiAoIShwcm9wTmFtZSBpbiB0YXJnZXQpKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHByb3BEZXNjcmlwdGlvbi52YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlKHRoaXM6IHR5cGVvZiB0YXJnZXQsIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWl4aW5bcHJvcE5hbWVdKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9wRGVzY3JpcHRpb24uZ2V0IHx8IHByb3BEZXNjcmlwdGlvbi5zZXQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzOiBQcm9wZXJ0eURlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcERlc2NyaXB0aW9uLmdldCkge1xuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLmdldCA9IGZ1bmN0aW9uKHRoaXM6IHR5cGVvZiB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtaXhpbltwcm9wTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwcm9wRGVzY3JpcHRpb24uc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuc2V0ID0gZnVuY3Rpb24odGhpczogdHlwZW9mIHRhcmdldCwgdmFsdWU6IGFueSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWl4aW5bcHJvcE5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wTmFtZSwgYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWl4aW5bcHJvcE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXQodmFsdWU6IGFueSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWl4aW5bcHJvcE5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5TWl4aW5zSW50ZXJuYWw8VCBleHRlbmRzIEFueU9iamVjdCwgRVggZXh0ZW5kcyB0cnVlIHwgZmFsc2UsIE1peGlucyBleHRlbmRzIEFycmF5PE1peGluPGFueSwgYW55Pj4+KFxuICAgIHRhcmdldDogVCwgZXh0ZW5kRnJvbU1peGluczogRVgsIC4uLm1peGluczogTWl4aW5zXG4pOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIHRhcmdldC5taXhpbnMgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICh0YXJnZXQubWl4aW5zIGFzIEFueU9iamVjdCkgPSB7fTtcbiAgICB9XG5cbiAgICBtaXhpbnMgPSBtaXhpbnMuZmlsdGVyKG0gPT4gISFtKSBhcyBNaXhpbnM7XG5cbiAgICBmb3IgKGNvbnN0IG1peGluT3JpZyBvZiBtaXhpbnMpIHtcbiAgICAgICAgY29uc3QgbWl4aW4gPSB7Li4ubWl4aW5PcmlnfTtcblxuICAgICAgICBjb25zdCBtaXhpbk5hbWUgPSBtaXhpbi5taXhpbk5hbWU7XG4gICAgICAgICh0YXJnZXQubWl4aW5zIGFzIEFueU9iamVjdClbbWl4aW5OYW1lXSA9IG1peGluO1xuICAgICAgICBtaXhpbi50YXJnZXQgPSB0YXJnZXQgYXMgYW55O1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgbWl4aW4gb2YgT2JqZWN0LnZhbHVlcyh0YXJnZXQubWl4aW5zIGFzIFJlY29yZDxzdHJpbmcsIE1peGluPGFueSwgYW55Pj4pKSB7XG4gICAgICAgIGlmICgnc2V0dXAnIGluIG1peGluICYmIHR5cGVvZiBtaXhpbi5zZXR1cCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29uc3Qgc2V0dXBSZXN1bHQgPSBtaXhpbi5zZXR1cCgpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzZXR1cFJlc3VsdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzZXR1cFJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbWl4aW5ba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChleHRlbmRGcm9tTWl4aW5zKSB7XG4gICAgICAgICAgICBjb25zdCBtaXhhYmxlcyA9IGdldE1peGFibGVzKG1peGluKTtcblxuICAgICAgICAgICAgbWl4aW5nUHJvcHMobWl4YWJsZXMsIHRhcmdldCwgbWl4aW4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBtaXhpbiBvZiBPYmplY3QudmFsdWVzKHRhcmdldC5taXhpbnMgYXMgUmVjb3JkPHN0cmluZywgTWl4aW48YW55LCBhbnk+PikpIHtcbiAgICAgICAgbWl4aW4uaW5pdCAmJiBtaXhpbi5pbml0KCk7XG4gICAgfVxuXG4gICAgaWYgKG1peGluc0FmdGVySW5pdCBpbiB0YXJnZXQgJiYgdHlwZW9mIHRhcmdldFttaXhpbnNBZnRlckluaXRdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRhcmdldFttaXhpbnNBZnRlckluaXRdKCk7XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIHRhcmdldDtcbn1cblxuY29uc3Qgbm9QZXJtaXRlbk1peGFibGVQcm9wZXJ0aWVzID0gWydfX3Byb3RvX18nLCAnaW5pdCcsICdzZXR1cCcsICd0YXJnZXQnLCAnbWl4aW5OYW1lJ107XG5cbi8qKlxuICogUmV0dXJucyBhIG1hcCBvZiBtaXhhYmxlcy4gVGhhdCBpcyB0aGluZ3MgdGhhdCBjYW4gYmUgbWl4ZWQgaW5cbiAqL1xuZnVuY3Rpb24gZ2V0TWl4YWJsZXMob2JqOiBvYmplY3QpOiBQcm9wZXJ0eURlc2NyaXB0b3JNYXAge1xuICAgIGNvbnN0IG1hcDogUHJvcGVydHlEZXNjcmlwdG9yTWFwID0ge307XG4gICAgY29uc3QgcHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKS5maWx0ZXIoaSA9PiBub1Blcm1pdGVuTWl4YWJsZVByb3BlcnRpZXMuaW5jbHVkZXMoaSkgPT09IGZhbHNlKTtcblxuICAgIGZvciAoY29uc3QgcHJvcE5hbWUgb2YgcHJvcE5hbWVzKSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcE5hbWUpO1xuXG4gICAgICAgIGlmIChkZXNjcmlwdG9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgbWFwW3Byb3BOYW1lXSA9IGRlc2NyaXB0b3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcDtcbn1cbiJdLCJuYW1lcyI6WyJtaXhpbnNBZnRlckluaXQiLCJNaXhpbkFzc2VydEVycm9yIiwiRXJyb3IiLCJoYXZlTWl4aW4iLCJ2IiwibWl4aW4iLCJ2Q2xhc3MiLCJtaXhpbnMiLCJtaXhpbk5hbWUiLCJoYXZlTWl4aW5zIiwibWl4aW5nUHJvcHMiLCJwcm9wZXJ0eURlc2NyaXB0b3JzIiwidGFyZ2V0IiwicHJvcE5hbWUiLCJPYmplY3QiLCJrZXlzIiwicHJvcERlc2NyaXB0aW9uIiwidmFsdWUiLCJSZWZsZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJhcmdzIiwiZ2V0Iiwic2V0IiwiYXR0cmlidXRlcyIsIltvYmplY3QgT2JqZWN0XSIsImFwcGx5TWl4aW5zSW50ZXJuYWwiLCJleHRlbmRGcm9tTWl4aW5zIiwiZmlsdGVyIiwibSIsIm1peGluT3JpZyIsInZhbHVlcyIsInNldHVwIiwic2V0dXBSZXN1bHQiLCJrZXkiLCJlbnRyaWVzIiwiZ2V0TWl4YWJsZXMiLCJpbml0Iiwibm9QZXJtaXRlbk1peGFibGVQcm9wZXJ0aWVzIiwib2JqIiwibWFwIiwicHJvcE5hbWVzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImkiLCJpbmNsdWRlcyIsImRlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1bmRlZmluZWQiLCJlcnJvciIsImpvaW4iLCJjb25maWciLCJjZmciLCJrbGFzcyIsIm0xIiwibTIiLCJtMyIsIm00IiwibTUiLCJtNiIsIm03IiwibTgiLCJtOSIsIm0xMCIsIl9hIiwic3VwZXIiLCJ0aGlzIl0sIm1hcHBpbmdzIjoic01BMkhPLE1BQU1BLEVBQWtCLHNCQVdsQkMsVUFBeUJDLGdCQ25JdEJDLEVBQ1pDLEVBQ0FDLEVBQ0FDLEdBTUEsTUFBb0IsaUJBQU5GLEdBQWtCLFdBQVlBLEdBQXlCLGlCQUFiQSxFQUFFRyxRQUN0REYsRUFBTUcsYUFBYUosRUFBRUcsUUFBK0MsaUJBQTlCSCxFQUFFRyxPQUFPRixFQUFNRyxvQkFJN0NDLEVBQ1pMLEVBQ0FHLEVBQ0FELEdBUUEsS0FGK0IsaUJBQU5GLEdBQWtCLFdBQVlBLEdBQXlCLGlCQUFiQSxFQUFF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
