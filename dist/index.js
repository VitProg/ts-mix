"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const mixinsAfterInit="__afterMixins";function mixin(e){const i=e;return Object.assign({target:void 0},i)}function applyMixinsForClass(e,...i){return class extends e{constructor(...e){super(...e),applyMixins(this,i)}}}function applyMixinsForObject(e,...i){const t=Object.assign({},e);return applyMixins(t,i),t}function applyMixins(e,i){"object"!=typeof e.mixins&&(e.mixins={});for(const t of i){const i=t.mixinName;if(e.mixins[i]=t,t.target=e,"setup"in t&&"function"==typeof t.setup){const e=t.setup();if(void 0!==e)for(const[i,n]of Object.entries(e))t[i]=n}const n=getMixables(t);for(const i of Object.keys(n)){const o=n[i];if(!(i in e))if("function"==typeof o.value)Reflect.defineProperty(e,i,{enumerable:!1,configurable:!0,writable:!1,value:(...e)=>t[i](...e)});else if(o.get||o.set){const n={enumerable:!1,configurable:!0};o.get&&(n.get=function(){return t[i]}),o.set&&(n.set=function(e){t[i]=e}),Reflect.defineProperty(e,i,n)}else Reflect.defineProperty(e,i,{enumerable:!1,configurable:!0,get:()=>t[i],set(e){t[i]=e}})}}for(const e of i)e.init&&e.init();mixinsAfterInit in e&&"function"==typeof e[mixinsAfterInit]&&e[mixinsAfterInit]()}function getMixables(e){const i={},t=Object.getOwnPropertyNames(e).filter(e=>"init"!==e&&"target"!==e&&"mixinName"!==e);for(const n of t){const t=Object.getOwnPropertyDescriptor(e,n);void 0!==t&&(i[n]=t)}return i}function use(...e){return function(i){return applyMixinsForClass(i,...e)}}function useProxy(...e){return function(i){return new Proxy(i,{construct(i,t){const n=Reflect.construct(i,t);return applyMixins(n,e),n}})}}function haveMixin(e,i){return"object"==typeof e&&"mixins"in e&&"object"==typeof e.mixins&&i.mixinName in e.mixins&&"object"==typeof e.mixins[i.mixinName]}function haveMixins(e,...i){if(!("object"==typeof e&&"mixins"in e&&"object"==typeof e.mixins))return!1;for(const t of i)if(!1===haveMixin(e,t))return!1;return!0}exports.applyMixinsForClass=applyMixinsForClass,exports.applyMixinsForObject=applyMixinsForObject,exports.haveMixin=haveMixin,exports.haveMixins=haveMixins,exports.mixin=mixin,exports.use=use,exports.useProxy=useProxy;
